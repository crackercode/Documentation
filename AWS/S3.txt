Amazon Simple Storage Service - S3

S3 Use cases
	- Backup and storage
	- Disaster Recovery
	- Archive
	- Hybrid Cloud storage
	- Application hosting
	- Media hosting
	- Data lakes & big data analytics
	- Software delivery
	- Static website
	
store objects (files) in “buckets” (directories)
Buckets must have a globally unique name (across all regions all accounts)
Buckets are defined at the region level

S3 looks like a global service but buckets are created in a region
Objects (files) have a Key
The key is the FULL path Eg : s3://my-bucket/my_file.txt

Object values are the content of the body - Max Object Size is 5TB (5000GB)- If uploading more than 5GB, must use “multi-part upload”
Metadata (list of text key / value pairs – system or user metadata)
Tags (Unicode key / value pair – up to 10) – useful for security / lifecycle
Version ID (if versioning is enabled)

S3 Security
	- User based
		IAM policies - which API calls should be allowed for a specific user from IAM console
	- Resource Based
		Bucket Policies - bucket wide rules from the S3 console - allows cross account
		Object Access Control List (ACL) – finer grain
		Bucket Access Control List (ACL) – less common

an IAM principal can access an S3 object if 1)the user IAM permissions allow it 2) the resource policy ALLOWS it 3) AND there’s no explicit DENY
Encryption: encrypt objects in Amazon S3 using encryption keys

Public Access - Use Bucket Policy
User Access to S3 – IAM permissions
EC2 instance access - Use IAM Roles
Cross-Account Access – Use Bucket Policy

Use S3 bucket for policy to
	- Grant public access to the bucket	
	- Force objects to be encrypted at upload	
	- Grant access to another account (Cross Account)

S3 - Versioning
	- Enabled at the bucket level
	- Protect against unintended deletes (ability to restore a version) - Delete marker
	- Easy roll back to previous version
	- Any file that is not versioned prior to enabling versioning will have version “null”
	- Suspending versioning does not delete the previous versions
	
S3 Access Logs 
	- audit purpose log all access to S3 buckets
	- Any request made to S3, from any account, authorized or denied, will be logged into another S3 bucket
	- Put logs to Logging Bucket

S3 Replication (CRR=Cross Region Replication & SRR=Same Region Replication)
	- Must enable versioning in source and destination
	- Buckets can be in different accounts
	- Copying is asynchronous
	- Must give proper IAM permissions to S3
CRR - Use cases: compliance, lower latency access, replication across accounts
SRR – Use cases: log aggregation, live replication between production and test accounts
